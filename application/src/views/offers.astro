---
import Layout from '~/layouts/PageLayout.astro';
import Hero from '~/components/widgets/Hero.astro';
import Pricing from '~/components/widgets/pricing/Pricing.astro';
import Content from '~/components/widgets/Content.astro';
import Features2 from '~/components/widgets/Features2.astro';
import Features3 from '~/components/widgets/Features3.astro';
import FAQs from '~/components/widgets/FAQs.astro';
import Steps from '~/components/widgets/Steps.astro';
import CallToAction from '~/components/widgets/CallToAction.astro';

import { Icon } from 'astro-icon/components';

import { getLangFromUrl, useTranslatedPath } from '~/i18n/utils';

const lang = getLangFromUrl(Astro.url);
const translatePath = useTranslatedPath(lang);

const metadata = {
  title: 'Offres HoverKraft',
  description:
    "Choisissez l'offre Hoverkraft qui correspond à votre maturité plateforme : audit, autonomie, restart ou Platform Engineer as a Service.",
};
---

<Layout metadata={metadata}>
  <Hero
    tagline="Nos offres"
    actions={[
      { variant: 'primary', text: 'Parler à un Kraft Builder', href: '/contact#form' },
      { text: 'Voir la méthodologie', href: '/methodology' },
    ]}
    image={{
      src: '~/assets/images/pages/offers/programming-1.webp',
      alt: 'Présentation des offres HoverKraft',
    }}
  >
    <Fragment slot="title">Des packs conçus pour libérer vos développeurs, étape par étape</Fragment>

    <Fragment slot="subtitle">
      De l'audit express à l'exécution managée (PEaaS), chaque offre HoverKraft combine méthodologie, connecteurs open
      source et accompagnement senior. Sélectionnez le pack qui correspond à votre niveau de maturité et à vos objectifs
      business.
      <span class="block mt-2 text-sm">
        Vous hésitez ? Faites d'abord le{' '}
        <a href={translatePath('/maturity-assessment')} class="font-semibold text-primary underline underline-offset-4">
          radar de maturité
        </a>
        (5 min).
      </span>
    </Fragment>
  </Hero>

  <Pricing
    title="Nos packs"
    subtitle="Des engagements clairs, des livrables concrets, des résultats mesurables."
    prices={[
      {
        title: 'Audit Hoverkraft',
        subtitle: 'Cartographie en 2 jours pour objectiver vos irritants',
        price: '2 500',
        currency: '€',
        period: 'HT (2 jours, indicatif)',
        items: [
          { description: 'Interviews dev / ops / produit et revue de vos assets' },
          { description: 'Carte des connecteurs existants et des points de friction' },
          { description: 'Score DORA/SPACE initial + recommandations priorisées' },
        ],
        callToAction: { text: "Planifier l'audit", href: '/contact#form' },
      },
      {
        title: 'Package Autonomie',
        subtitle: 'Atelier, kit et suivi pour ancrer la méthode Hoverkraft',
        price: '1 800',
        currency: '€',
        period: 'HT (format 5h, indicatif)',
        items: [
          { description: "Atelier de structuration + kit d'outillage Hoverkraft" },
          { description: 'Feuille de route 6 mois et jalons DORA/SPACE' },
          { description: 'Session de suivi pour sécuriser la mise en œuvre' },
        ],
        callToAction: { text: 'Construire le plan', href: '/contact' },
        hasRibbon: true,
        ribbonTitle: 'Populaire',
      },
      {
        title: 'Restart (Transformation complète)',
        subtitle: 'Audit, roadmap 6 mois puis accompagnement 6-12 mois',
        price: '25 000',
        currency: '€',
        period: 'HT + suivi (indicatif, ajusté au contexte)',
        items: [
          { description: 'Programme de transformation avec gouvernance partagée' },
          { description: 'Déploiement complet de la glue Hoverkraft (CI/CD, observabilité, IAM)' },
          { description: 'Formations certifiantes et rituels DORA/SPACE' },
        ],
        callToAction: { text: 'Lancer le restart', href: '/contact' },
      },
      {
        title: 'Platform Engineer as a Service',
        subtitle: 'Des ressources continues pour opérer la plateforme',
        price: '3 000',
        currency: '€',
        period: 'HT / mois (indicatif)',
        items: [
          { description: 'Ressources dédiées et priorisation conjointe' },
          { description: 'Roadmap continue, run partagé et reporting exécutif' },
          { description: 'Accès à la communauté OpenKraft et aux connecteurs' },
        ],
        callToAction: { text: 'Discuter de PEaaS', href: '/contact' },
      },
    ]}
  />

  <aside class="mx-auto mt-6 max-w-4xl px-4 sm:px-6" aria-label="Information tarifaire">
    <div
      class="flex items-center gap-3 rounded-lg border border-primary/20 bg-primary/5 px-4 py-3 text-base shadow-sm dark:border-primary/30"
    >
      <div class="mt-0.5 flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary/10 text-primary">
        <Icon name="tabler:info-circle" class="h-5 w-5" />
      </div>
      <p class="text-default font-medium leading-snug">
        Le coût de l'audit est déduit si un contrat <span class="font-semibold text-default">Restart</span> est signé dans
        la continuité.
      </p>
    </div>
  </aside>

  <Content
    isReversed
    title="Ce que chaque pack garantit"
    items={[
      {
        title: 'Livrables tangibles',
        description: 'Audit écrit, backlog priorisé, dashboards DORA/SPACE et code source de la glue déployée.',
      },
      {
        title: 'Transfert de compétences',
        description: 'Formations et pairings pour ancrer durablement les pratiques HoverKraft dans vos rituels.',
      },
      {
        title: 'Mesure continue',
        description: 'Indicateurs avant/après, ROI calculé et boucle de feedback mensuelle avec vos équipes.',
      },
    ]}
    image={{
      src: '~/assets/images/pages/offers/questions-answers.png',
      alt: 'Gestion opérationnelle des livrables HoverKraft',
    }}
  />

  <Features2
    title="Comparatif rapide"
    subtitle="Choisissez la formule adaptée à votre contexte."
    columns={2}
    items={[
      {
        title: 'Audit Hoverkraft',
        description: 'Idéal pour prendre une photo claire de votre chaîne de delivery et convaincre votre direction.',
        icon: 'tabler:search',
      },
      {
        title: 'Package Autonomie',
        description: "Vous disposez d'une équipe motivée et voulez monter en maturité rapidement, en gardant la main.",
        icon: 'tabler:road',
      },
      {
        title: 'Restart',
        description: 'Vous devez relancer votre initiative plateforme en mêlant accompagnement, delivery et change.',
        icon: 'tabler:refresh',
      },
      {
        title: 'PEaaS',
        description: "Vous souhaitez externaliser une partie de l'équipe plateforme tout en gardant la gouvernance.",
        icon: 'tabler:rocket',
      },
    ]}
  />

  <Features3
    title="Ce qui est inclus"
    subtitle="Chaque pack HoverKraft combine accompagnement, livrables et transfert."
    columns={2}
    items={[
      {
        title: 'Livrables documentés',
        description: "Audit écrit, plans d'action, dashboards et code source de la glue livrés dans chaque offre.",
        icon: 'tabler:clipboard-text',
      },
      {
        title: 'Coaching dédié',
        description: 'Un Kraft Builder référent qui suit votre mission et anime les rituels clés.',
        icon: 'tabler:user-star',
      },
      {
        title: 'Open source first',
        description: 'Tous nos connecteurs sont publiés sur GitHub & GitLab pour garantir la réversibilité.',
        icon: 'tabler:brand-open-source',
      },
      {
        title: "Mesure d'impact",
        description: 'Suivi DORA/SPACE avant/après, ROI chiffré et recommandations à 6 mois.',
        icon: 'tabler:chart-line',
      },
      {
        title: 'Support communautaire',
        description: 'Accès à la communauté OpenKraft, webinars et ressources exclusives.',
        icon: 'tabler:messages',
      },
      {
        title: "Flexibilité d'engagement",
        description: 'Possibilité de monter ou descendre en gamme selon vos chantiers et votre rythme.',
        icon: 'tabler:arrows-random',
      },
    ]}
    classes={{ container: 'max-w-5xl' }}
  />

  <Steps
    title="Un cadre identique, quelle que soit l'offre"
    items={[
      {
        title: '1. Audit structuré',
        description: "Interviews, collecte d'indicateurs et revue de vos pipelines existants.",
        icon: 'tabler:clipboard-text',
      },
      {
        title: '2. Trajectoire partagée',
        description: 'Roadmap co-construite autour des métriques DORA/SPACE et des quick wins identifiés.',
        icon: 'tabler:timeline',
      },
      {
        title: '3. Delivery en binôme',
        description: 'Intégration de la glue HoverKraft avec vos équipes pour garantir l’appropriation.',
        icon: 'tabler:users',
      },
      {
        title: '4. Preuve & transfert',
        description: 'Dashboards avant/après, documentation livrée et passage de relais sécurisé.',
        icon: 'tabler:report-analytics',
      },
    ]}
    image={{
      src: '~/assets/images/pages/offers/programming-6.webp',
      alt: 'Ingénieurs HoverKraft en mission',
    }}
  />

  <Steps
    title="Comment choisir votre pack"
    tagline="processus accompagné"
    isReversed
    items={[
      {
        title: '1. Audit flash offert',
        description: "30 minutes pour comprendre vos défis actuels et valider l'adéquation du pack.",
        icon: 'tabler:phone',
      },
      {
        title: '2. Projection financière',
        description: 'Estimation du ROI basée sur vos métriques DORA/SPACE actuelles.',
        icon: 'tabler:abacus',
      },
      {
        title: '3. Signature & kick-off',
        description: "Planification des ateliers et constitution de l'équipe mixte.",
        icon: 'tabler:calendar-event',
      },
      {
        title: '4. Delivery & mesure',
        description: 'Suivi hebdomadaire, dashboards partagés et adaptation continue.',
        icon: 'tabler:chart-dots',
      },
    ]}
    image={{
      src: '~/assets/images/pages/offers/rbac-and-gouvernance.png',
      alt: 'Schéma de gouvernance HoverKraft',
    }}
  />

  <FAQs
    title="Questions fréquentes"
    subtitle="Précisions sur nos modalités d'engagement."
    columns={1}
    items={[
      {
        title: "Peut-on commencer par l'audit avant de s'engager ?",
        description:
          "Oui. L'audit est souvent le point d'entrée. Il peut être déduit du pack choisi si la mission débute dans les 60 jours.",
      },
      {
        title: 'Les prix indiqués sont-ils HT ?',
        description:
          'Oui, tous les montants sont exprimés hors taxes. Les frais de déplacement éventuels sont indiqués avant signature.',
      },
      {
        title: "Peut-on ajuster la durée d'accompagnement ?",
        description:
          'Les packs sont modulables. Nous recalons la durée et la volumétrie en fonction de vos objectifs et de vos équipes.',
      },
      {
        title: 'Quelles sont les modalités de paiement ?',
        description: "Facturation à la mission pour l'audit et le package autonomie, mensuelle pour Restart et PEaaS.",
      },
      {
        title: "Existe-t-il une option d'abonnement ?",
        description:
          'PEaaS fonctionne comme un abonnement trimestriel renouvelable. Nous ajustons la capacité de la squad selon votre roadmap.',
      },
    ]}
  />

  <CallToAction
    actions={[
      { variant: 'primary', text: 'Choisir mon pack', href: '/contact#form' },
      { text: 'Découvrir la méthode', href: '/methodology' },
    ]}
  >
    <Fragment slot="title">Besoin d'un coup de main pour vous décider ?</Fragment>
    <Fragment slot="subtitle"
      >Parlons de votre contexte et identifions ensemble l'offre HoverKraft la plus pertinente.</Fragment
    >
  </CallToAction>
</Layout>
